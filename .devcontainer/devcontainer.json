{
    "build": { "dockerfile": "Dockerfile" },
    "mounts": [
        "source=abs-server-node_modules,target=${containerWorkspaceFolder}/node_modules,type=volume",
        "source=abs-client-node_modules,target=${containerWorkspaceFolder}/client/node_modules,type=volume"
    ],
    "features": {
        "fish": "latest"
	},
	"extensions": [
		"eamodio.gitlens"
    ],
    "remoteUser": "node",
    "postCreateCommand": {
        "git": "git config --global --add safe.directory ${containerWorkspaceFolder}",
        "server install": "cd ${containerWorkspaceFolder} && sudo chown $(id -u):$(id -g) node_modules && npm i --from-lockfile",
        "client install": "cd ${containerWorkspaceFolder}/client && sudo chown $(id -u):$(id -g) node_modules && npm i --from-lockfile && npm run generate"
    }
}